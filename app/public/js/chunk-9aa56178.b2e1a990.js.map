{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack:///./src/pages/lesson/list.vue?ae5a","webpack:///./src/pages/lesson/lesson-form.vue?654d","webpack:///./src/pages/lesson/list.vue?0ef9","webpack:///src/pages/lesson/list.vue","webpack:///./src/pages/lesson/list.vue?2007","webpack:///./src/pages/lesson/list.vue","webpack:///./src/api/lesson.js","webpack:///./src/pages/lesson/lesson-form.vue?7ed4","webpack:///src/pages/lesson/lesson-form.vue","webpack:///./src/pages/lesson/lesson-form.vue?0194","webpack:///./src/pages/lesson/lesson-form.vue"],"names":["_objectWithoutPropertiesLoose","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","_objectWithoutProperties","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","gotoAdd","_v","directives","name","rawName","value","expression","data","scopedSlots","_u","fn","scope","row","img","_s","status","$event","gotoEdit","publish","downLesson","deleteLesson","id","total","handleCurrentChange","showDialog","resetForm","ref","refreshData","staticRenderFns","$message","success","fetchData","error","component","publishLesson","xhttp","put","getLessonList","params","get","getLessonDetail","lessonID","getLessonCategory","delLesson","delete","addLesson","post","updateLesson","getCatalogList","getCatalogDetail","catalogID","addCatalog","updateCatalog","delCatalog","getPdfimg","bindppt","courseId","catalogId","form","rules","model","callback","$$v","$set","trim","_l","option","categoryId","categoryName","customUpload","minRows","maxRows","save","fetchDetail"],"mappings":"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","file":"js/chunk-9aa56178.b2e1a990.js","sourcesContent":["export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=72878f59&lang=less&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./lesson-form.vue?vue&type=style&index=0&id=7ea5ba04&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-lesson-list\"},[_c('header',[_c('div'),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"size\":\"medium\"},on:{\"click\":_vm.gotoAdd}},[_vm._v(\"新建课程\")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.data}},[_c('el-table-column',{attrs:{\"prop\":\"img\",\"width\":\"150\",\"label\":\"课程图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{attrs:{\"src\":scope.row.img,\"width\":\"100\",\"height\":\"100\",\"alt\":\"\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"min-width\":\"200\",\"label\":\"课程名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"cateory_name\",\"label\":\"所属分类\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.status === 0 ? '待发布' : '已发布'))]}}])}),_c('el-table-column',{attrs:{\"label\":\"课程目录数\",\"prop\":\"catalog_num\",\"width\":\"320\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.gotoEdit(scope.row)}}},[_vm._v(\"详情\")]),(scope.row.status === 0 || scope.row.status === 2)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.publish(scope.row)}}},[_vm._v(\"发布\")]):_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.downLesson(scope.row)}}},[_vm._v(\"下架\")]),_c('el-button',{staticClass:\"delete\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteLesson(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_c('page-pagination',{attrs:{\"pageSize\":10,\"total\":_vm.total},on:{\"currentChange\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":\"新建课程\",\"width\":\"700px\",\"visible\":_vm.showDialog},on:{\"close\":_vm.resetForm,\"update:visible\":function($event){_vm.showDialog=$event}}},[_c('lesson-form',{ref:\"lessonForm\",on:{\"onsuccess\":_vm.refreshData}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"page-lesson-list\">\r\n        <header>\r\n            <div></div>\r\n            <!-- <el-input placeholder=\"请输入搜索信息\"\r\n                suffix-icon=\"el-icon-search\"\r\n                @keyup.enter.native=\"searchData\"\r\n                size=\"medium\"\r\n                v-model.trim=\"key\">\r\n            </el-input> -->\r\n            <el-button\r\n                type=\"primary\"\r\n                @click=\"gotoAdd\"\r\n                icon=\"el-icon-plus\"\r\n                size=\"medium\"\r\n                >新建课程</el-button\r\n            >\r\n        </header>\r\n        <el-table :data=\"data\" v-loading=\"loading\">\r\n            <el-table-column prop=\"img\" width=\"150\" label=\"课程图片\">\r\n                <template slot-scope=\"scope\">\r\n                    <img :src=\"scope.row.img\" width=\"100\" height=\"100\" alt=\"\" />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"name\" min-width=\"200\" label=\"课程名称\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"cateory_name\" label=\"所属分类\">\r\n            </el-table-column>\r\n            <el-table-column label=\"状态\">\r\n                <template slot-scope=\"scope\">{{\r\n                    scope.row.status === 0 ? '待发布' : '已发布'\r\n                }}</template>\r\n            </el-table-column>\r\n            <el-table-column label=\"课程目录数\" prop=\"catalog_num\" width=\"320\">\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" min-width=\"150\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button type=\"text\" @click=\"gotoEdit(scope.row)\"\r\n                        >详情</el-button\r\n                    >\r\n                    <el-button\r\n                        type=\"text\"\r\n                        v-if=\"scope.row.status === 0 || scope.row.status === 2\"\r\n                        @click=\"publish(scope.row)\"\r\n                        >发布</el-button\r\n                    >\r\n                    <el-button type=\"text\" v-else @click=\"downLesson(scope.row)\"\r\n                        >下架</el-button\r\n                    >\r\n                    <el-button\r\n                        type=\"text\"\r\n                        class=\"delete\"\r\n                        @click=\"deleteLesson(scope.row.id)\"\r\n                        >删除</el-button\r\n                    >\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <page-pagination\r\n            :pageSize=\"10\"\r\n            @currentChange=\"handleCurrentChange\"\r\n            :total=\"total\"\r\n        ></page-pagination>\r\n\r\n        <el-dialog\r\n            title=\"新建课程\"\r\n            width=\"700px\"\r\n            @close=\"resetForm\"\r\n            :visible.sync=\"showDialog\"\r\n        >\r\n            <lesson-form ref=\"lessonForm\" @onsuccess=\"refreshData\">\r\n            </lesson-form>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    getLessonList,\r\n    delLesson,\r\n    publishLesson,\r\n    downLesson\r\n} from 'src/api/lesson'\r\nimport lessonForm from './lesson-form'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            data: [],\r\n            loading: false,\r\n            total: 0,\r\n            key: '',\r\n            showDialog: false,\r\n            page: 1\r\n        }\r\n    },\r\n    components: {\r\n        lessonForm\r\n    },\r\n    computed: {\r\n        imgData() {\r\n            return {\r\n                media_type: 1\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        publish(item) {\r\n            publishLesson(item.id)\r\n                .then(() => {\r\n                    this.$message.success('发布课程成功')\r\n                    this.fetchData()\r\n                })\r\n                .catch(e => {\r\n                    this.$message.error(e.message)\r\n                })\r\n        },\r\n        refreshData() {\r\n            this.fetchData()\r\n            this.showDialog = false\r\n        },\r\n        resetForm() {\r\n            this.$refs.lessonForm.reset()\r\n        },\r\n        gotoAdd() {\r\n            this.showDialog = true\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.page = val\r\n            this.fetchData(val)\r\n        },\r\n        fetchData(page) {\r\n            if (this.loading) {\r\n                return\r\n            }\r\n            this.loading = true\r\n\r\n            getLessonList({\r\n                page: page || this.page || 1\r\n            })\r\n                .then(res => {\r\n                    this.data = res.data\r\n                    this.total = res.total\r\n                })\r\n                .catch(e => {\r\n                    this.$message.error(e.message)\r\n                })\r\n                .finally(() => {\r\n                    this.loading = false\r\n                })\r\n        },\r\n\r\n        async downLesson({ id }) {\r\n            try {\r\n                await downLesson(id)\r\n                this.$message.success('下架成功')\r\n                this.fetchData()\r\n            } catch (error) {\r\n                this.$message.error(\r\n                    `下架失败${error.message || error.msg || ''}`\r\n                )\r\n            }\r\n        },\r\n\r\n        deleteLesson(id) {\r\n            this.$confirm('此操作将永久删除该课程, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            })\r\n                .then(() => {\r\n                    delLesson(id)\r\n                        .then(() => {\r\n                            this.$message.success('删除课程成功')\r\n                            if (this.data.length === 1) {\r\n                                const prePage = this.page - 1\r\n                                this.page = prePage >= 1 ? prePage : 1\r\n                            }\r\n                            this.fetchData()\r\n                        })\r\n                        .catch(e => {\r\n                            this.$message.error(e.message)\r\n                        })\r\n                })\r\n                .catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消删除'\r\n                    })\r\n                })\r\n        },\r\n        gotoEdit(item) {\r\n            this.$router.push({\r\n                name: 'lesson-detail',\r\n                params: {\r\n                    id: item.id\r\n                }\r\n            })\r\n        }\r\n    },\r\n    created() {\r\n        this.fetchData()\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '~assets/less/var.less';\r\n\r\n.page-lesson-list {\r\n    background-color: #fff;\r\n    header {\r\n        padding: 15px 20px;\r\n        text-align: right;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        .el-input {\r\n            width: 300px;\r\n        }\r\n    }\r\n    .el-button.delete {\r\n        color: @color-red;\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=72878f59&scoped=true&\"\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=72878f59&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72878f59\",\n  null\n  \n)\n\nexport default component.exports","import xhttp from 'src/utils/xhttp'\r\n\r\n// 发布课程\r\nexport function publishLesson(id) {\r\n    return xhttp.put(`/lesson/list/pub/${id}`)\r\n}\r\n\r\n// 下架课程\r\nexport function downLesson(id) {\r\n    return xhttp.put(`/lesson/list/down/${id}`)\r\n}\r\n\r\n// 获取课程列表\r\nexport function getLessonList(params) {\r\n    return xhttp.get('/lesson/list', { params })\r\n}\r\n\r\n// 获取课程详情\r\nexport function getLessonDetail(lessonID) {\r\n    return xhttp.get(`/lesson/list/${lessonID}`)\r\n}\r\n\r\n// 获取课程分类\r\nexport function getLessonCategory() {\r\n    return xhttp.get('/lesson/category')\r\n}\r\n\r\n// 删除课程\r\nexport function delLesson(lessonID) {\r\n    return xhttp.delete(`/lesson/${lessonID}`)\r\n}\r\n\r\n// 增加课程\r\nexport function addLesson(params) {\r\n    return xhttp.post('/lesson/list', params)\r\n}\r\n\r\n// 更新课程\r\nexport function updateLesson(lessonID, params) {\r\n    return xhttp.put(`/lesson/list/${lessonID}`, params)\r\n}\r\n\r\n// 获取目录列表\r\nexport function getCatalogList(lessonID, params) {\r\n    return xhttp.get(`/lesson/catalog/${lessonID}`, { params })\r\n}\r\n\r\n// 获取目录详情\r\nexport function getCatalogDetail(lessonID, catalogID) {\r\n    return xhttp.get(`/lesson/catalog/${lessonID}/${catalogID}`)\r\n}\r\n\r\n// 增加目录\r\nexport function addCatalog(lessonID, params) {\r\n    return xhttp.post(`/lesson/catalog/${lessonID}`, params)\r\n}\r\n\r\n// 更新目录\r\nexport function updateCatalog(lessonID, catalogID, params) {\r\n    return xhttp.put(`/lesson/catalog/${lessonID}/${catalogID}`, params)\r\n}\r\n\r\n// 删除目录\r\nexport function delCatalog(lessonID, catalogID) {\r\n    return xhttp.delete(`/lesson/catalog/${lessonID}/${catalogID}`)\r\n}\r\n\r\n// 获取上传视频的认证等信息\r\nexport function getPolicy() {\r\n    return xhttp.get('/oss/get-policy')\r\n}\r\n\r\n// 上传PDF以后保存接口，获取png图片列表\r\nexport function getPdfimg(params) {\r\n    return xhttp.post('/pdf2png', params)\r\n}\r\n\r\n// 绑定ppt\r\nexport function bindppt(courseId, catalogId, params) {\r\n    return xhttp.post(`/lesson/catalog/${courseId}/${catalogId}/image`, params)\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loadingDetail),expression:\"loadingDetail\"}],staticClass:\"lesson-form\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"课程名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入课程名称\",\"maxlength\":\"50\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"课程分类\",\"prop\":\"category\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择课程分类\"},model:{value:(_vm.form.category),callback:function ($$v) {_vm.$set(_vm.form, \"category\", $$v)},expression:\"form.category\"}},_vm._l((_vm.options),function(option){return _c('el-option',{key:option.categoryId,attrs:{\"label\":option.categoryName,\"value\":option.categoryId}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"讲师名称\",\"prop\":\"lector\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入讲师名称\",\"maxlength\":\"50\"},model:{value:(_vm.form.lector),callback:function ($$v) {_vm.$set(_vm.form, \"lector\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.lector\"}})],1),_c('el-form-item',{attrs:{\"label\":\"课程图片\",\"prop\":\"img\"}},[_c('img-loader',{attrs:{\"httpRequest\":_vm.customUpload,\"action\":\"\"},model:{value:(_vm.form.imgUrl),callback:function ($$v) {_vm.$set(_vm.form, \"imgUrl\", $$v)},expression:\"form.imgUrl\"}})],1),_c('el-form-item',{attrs:{\"label\":\"课程简介\",\"prop\":\"desc\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入课程简介\",\"autosize\":{ minRows: 3, maxRows: 6 },\"maxlength\":500},model:{value:(_vm.form.desc),callback:function ($$v) {_vm.$set(_vm.form, \"desc\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.desc\"}})],1)],1),_c('div',{staticClass:\"submit-btn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"lesson-form\" v-loading=\"loadingDetail\">\r\n        <el-form\r\n            :model=\"form\"\r\n            :rules=\"rules\"\r\n            label-position=\"left\"\r\n            label-width=\"100px\"\r\n            ref=\"form\"\r\n        >\r\n            <el-form-item label=\"课程名称\" prop=\"name\">\r\n                <el-input\r\n                    v-model.trim=\"form.name\"\r\n                    placeholder=\"请输入课程名称\"\r\n                    maxlength=\"50\"\r\n                ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"课程分类\" prop=\"category\">\r\n                <el-select v-model=\"form.category\" placeholder=\"请选择课程分类\">\r\n                    <el-option\r\n                        :label=\"option.categoryName\"\r\n                        v-for=\"option in options\"\r\n                        :key=\"option.categoryId\"\r\n                        :value=\"option.categoryId\"\r\n                    ></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"讲师名称\" prop=\"lector\">\r\n                <el-input\r\n                    v-model.trim=\"form.lector\"\r\n                    placeholder=\"请输入讲师名称\"\r\n                    maxlength=\"50\"\r\n                ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"课程图片\" prop=\"img\">\r\n                <img-loader\r\n                    v-model=\"form.imgUrl\"\r\n                    :httpRequest=\"customUpload\"\r\n                    action=\"\"\r\n                >\r\n                </img-loader>\r\n            </el-form-item>\r\n            <el-form-item label=\"课程简介\" prop=\"desc\">\r\n                <el-input\r\n                    type=\"textarea\"\r\n                    placeholder=\"请输入课程简介\"\r\n                    :autosize=\"{ minRows: 3, maxRows: 6 }\"\r\n                    :maxlength=\"500\"\r\n                    v-model.trim=\"form.desc\"\r\n                ></el-input>\r\n            </el-form-item>\r\n        </el-form>\r\n        <div class=\"submit-btn\">\r\n            <el-button type=\"primary\" @click=\"save\" size=\"medium\"\r\n                >保存</el-button\r\n            >\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    getLessonDetail,\r\n    getLessonCategory,\r\n    addLesson,\r\n    updateLesson\r\n} from 'src/api/lesson'\r\nimport { qiniuUpload } from 'src/utils/qiniu'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            form: {\r\n                id: 1,\r\n                img: '', // 课程图片\r\n                imgUrl: '',\r\n                name: '', // 课程名称\r\n                category: '', // 所属分类\r\n                number: '', // 课程目录数\r\n                lector: '', // 讲师\r\n                desc: '' // 课程简介\r\n            },\r\n            rules: {\r\n                name: {\r\n                    message: '课程名称不能为空',\r\n                    required: true,\r\n                    trigger: ['blur']\r\n                },\r\n                category: {\r\n                    message: '请至少选择一个课程分类',\r\n                    required: true,\r\n                    trigger: ['blur']\r\n                },\r\n                lector: {\r\n                    message: '讲师名称不能为空',\r\n                    required: true,\r\n                    trigger: ['blur']\r\n                },\r\n                img: {\r\n                    message: '课程图片不能为空',\r\n                    required: true,\r\n                    trigger: ['blur', 'change']\r\n                }\r\n            },\r\n            options: [\r\n                {\r\n                    categoryId: 1, // 分类id\r\n                    categoryName: '' // 分类名称\r\n                }\r\n            ],\r\n\r\n            loadingDetail: false,\r\n            btnloading: false,\r\n            fileData: {}\r\n        }\r\n    },\r\n    methods: {\r\n        setImgurl(file) {\r\n            const reader = new FileReader()\r\n            reader.readAsDataURL(file)\r\n            reader.onload = () => {\r\n                this.form.imgUrl = reader.result\r\n            }\r\n        },\r\n        update(params, row) {\r\n            this.fileData = {\r\n                ...this.fileData,\r\n                ...params\r\n            }\r\n            if (params.status === 'completed') {\r\n                this.$message.success('上传图片成功')\r\n                this.setImgurl(row.file)\r\n                this.form.img = this.fileData.key\r\n            } else if (params.status === 'error') {\r\n                this.$message.error('图片上传失败')\r\n            }\r\n        },\r\n        customUpload(data) {\r\n            this.fileData = { file: data.file }\r\n            qiniuUpload(this.fileData, this.update)\r\n        },\r\n        save() {\r\n            this.$refs.form.validate(valid => {\r\n                if (valid) {\r\n                    if (this.btnloading) {\r\n                        return\r\n                    }\r\n                    this.btnloading = true\r\n                    // eslint-disable-next-line no-unused-vars\r\n                    const { imgUrl, ...other } = this.form\r\n                    if (!this.$route.params.id) {\r\n                        addLesson(other)\r\n                            .then(() => {\r\n                                this.$message.success('添加成功')\r\n                                this.$emit('onsuccess')\r\n                            })\r\n                            .catch(e => {\r\n                                this.$message.error(e.message)\r\n                            })\r\n                            .finally(() => {\r\n                                this.btnloading = false\r\n                            })\r\n                    } else {\r\n                        updateLesson(this.$route.params.id, other)\r\n                            .then(() => {\r\n                                this.$message.success('编辑成功')\r\n                                this.$emit('onsuccess')\r\n                            })\r\n                            .catch(e => {\r\n                                this.$message.error(e.message)\r\n                            })\r\n                            .finally(() => {\r\n                                this.btnloading = false\r\n                            })\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        fetchDetail() {\r\n            if (this.loadingDetail) {\r\n                return\r\n            }\r\n            this.loadingDetail = true\r\n\r\n            getLessonDetail(this.$route.params.id)\r\n                .then(res => {\r\n                    this.form = {\r\n                        ...res,\r\n                        imgUrl: res.img,\r\n                        img: res.img_media_id\r\n                    }\r\n                    if (res.category_id) {\r\n                        this.$set(this.form, 'category', res.category_id)\r\n                    }\r\n                    this.$refs.form.clearValidate()\r\n                })\r\n                .catch(e => {\r\n                    this.$message.error(e.message)\r\n                })\r\n                .finally(() => {\r\n                    this.loadingDetail = false\r\n                })\r\n        },\r\n        reset() {\r\n            this.$refs.form && this.$refs.form.resetFields()\r\n        }\r\n    },\r\n    async created() {\r\n        try {\r\n            const res = await getLessonCategory()\r\n            this.options = res\r\n            if (this.$route.params.id) {\r\n                this.fetchDetail()\r\n            }\r\n        } catch (e) {\r\n            this.$message.error(e.message)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.lesson-form {\r\n    .el-input,\r\n    .el-textarea,\r\n    .el-select {\r\n        width: 400px;\r\n    }\r\n}\r\n.submit-btn {\r\n    margin: 30px 0 10px;\r\n    text-align: right;\r\n    button {\r\n        min-width: 100px;\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./lesson-form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./lesson-form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./lesson-form.vue?vue&type=template&id=7ea5ba04&scoped=true&\"\nimport script from \"./lesson-form.vue?vue&type=script&lang=js&\"\nexport * from \"./lesson-form.vue?vue&type=script&lang=js&\"\nimport style0 from \"./lesson-form.vue?vue&type=style&index=0&id=7ea5ba04&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ea5ba04\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}