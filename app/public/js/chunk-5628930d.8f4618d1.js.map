{"version":3,"sources":["webpack:///./src/pages/category/list.vue?ca41","webpack:///./src/api/category.js","webpack:///src/pages/category/list.vue","webpack:///./src/pages/category/list.vue?a329","webpack:///./src/pages/category/list.vue","webpack:///./src/pages/category/list.vue?bb39"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","on","gotoAdd","directives","name","rawName","value","expression","data","scopedSlots","_u","key","fn","scope","_s","statusMap","row","status","$event","gotoEdit","publish","_e","down","deleteCategory","id","total","handleCurrentChange","showDialog","reset","ref","form","rules","model","callback","$$v","$set","trim","btnloading","save","staticRenderFns","getCategoryList","params","xhttp","get","getCategoryDetail","lessonID","delCategory","delete","addCategory","post","updateCategory","put","publishCategory","downCategory","component"],"mappings":"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","file":"js/chunk-5628930d.8f4618d1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-Category-list\"},[_c('header',[_c('div',{staticClass:\"tips\"},[_vm._v(\"\\n            排序设定会影响在app端的展示顺序。排序规则,大的排前面，如果排序值一样，时间距离当前最近的排前面\\n        \")]),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"size\":\"medium\"},on:{\"click\":_vm.gotoAdd}},[_vm._v(\"新增\")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.data}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"min-width\":\"200\",\"label\":\"名称\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm.statusMap[scope.row.status]))]}}])}),_c('el-table-column',{attrs:{\"prop\":\"sort_val\",\"label\":\"排序\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.gotoEdit(scope.row)}}},[_vm._v(\"编辑\")]),(scope.row.status === 0 || scope.row.status === 2)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.publish(scope.row)}}},[_vm._v(\"发布\")]):_vm._e(),(scope.row.status === 1)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.down(scope.row)}}},[_vm._v(\"下架\")]):_vm._e(),_c('el-button',{staticClass:\"delete\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteCategory(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_c('page-pagination',{attrs:{\"pageSize\":10,\"total\":_vm.total},on:{\"currentChange\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":!_vm.id ? '新建分类' : '编辑分类',\"width\":\"700px\",\"visible\":_vm.showDialog},on:{\"close\":_vm.reset,\"update:visible\":function($event){_vm.showDialog=$event}}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loadingDetail),expression:\"loadingDetail\"}],staticClass:\"Category-form\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入分类名称\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"sort_val\"}},[_c('el-input-number',{attrs:{\"min\":1,\"label\":\"请输入排序\"},model:{value:(_vm.form.sort_val),callback:function ($$v) {_vm.$set(_vm.form, \"sort_val\", $$v)},expression:\"form.sort_val\"}})],1)],1),_c('div',{staticClass:\"submit-btn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnloading,\"size\":\"medium\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import xhttp from 'src/utils/xhttp'\r\n\r\n// 获取分类列表\r\nexport function getCategoryList(params) {\r\n    return xhttp.get('/category', { params })\r\n}\r\n\r\n// 获取分类详情\r\nexport function getCategoryDetail(lessonID) {\r\n    return xhttp.get(`/category/${lessonID}`)\r\n}\r\n\r\n// 删除分类\r\nexport function delCategory(lessonID) {\r\n    return xhttp.delete(`/category/${lessonID}`)\r\n}\r\n\r\n// 增加分类\r\nexport function addCategory(params) {\r\n    return xhttp.post('/category', params)\r\n}\r\n\r\n// 更新分类\r\nexport function updateCategory(lessonID, params) {\r\n    return xhttp.put(`/category/${lessonID}`, params)\r\n}\r\n\r\n// 发布分类\r\nexport function publishCategory(id) {\r\n    return xhttp.put(`/category/publish/${id}`)\r\n}\r\n\r\n// 下架分类\r\nexport function downCategory(id) {\r\n    return xhttp.put(`/category/down/${id}`)\r\n}\r\n","<template>\r\n    <div class=\"page-Category-list\">\r\n        <header>\r\n            <div class=\"tips\">\r\n                排序设定会影响在app端的展示顺序。排序规则,大的排前面，如果排序值一样，时间距离当前最近的排前面\r\n            </div>\r\n            <!-- <el-input placeholder=\"请输入搜索信息\"\r\n                suffix-icon=\"el-icon-search\"\r\n                @keyup.enter.native=\"searchData\"\r\n                size=\"medium\"\r\n                v-model.trim=\"key\">\r\n            </el-input> -->\r\n            <el-button\r\n                type=\"primary\"\r\n                @click=\"gotoAdd\"\r\n                icon=\"el-icon-plus\"\r\n                size=\"medium\"\r\n                >新增</el-button\r\n            >\r\n        </header>\r\n        <el-table :data=\"data\" v-loading=\"loading\">\r\n            <el-table-column prop=\"name\" min-width=\"200\" label=\"名称\">\r\n            </el-table-column>\r\n            <el-table-column label=\"状态\">\r\n                <template slot-scope=\"scope\">{{\r\n                    statusMap[scope.row.status]\r\n                }}</template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"sort_val\" label=\"排序\"> </el-table-column>\r\n            <el-table-column label=\"操作\" min-width=\"150\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button type=\"text\" @click=\"gotoEdit(scope.row)\"\r\n                        >编辑</el-button\r\n                    >\r\n                    <el-button\r\n                        type=\"text\"\r\n                        v-if=\"scope.row.status === 0 || scope.row.status === 2\"\r\n                        @click=\"publish(scope.row)\"\r\n                        >发布</el-button\r\n                    >\r\n                    <el-button\r\n                        type=\"text\"\r\n                        v-if=\"scope.row.status === 1\"\r\n                        @click=\"down(scope.row)\"\r\n                        >下架</el-button\r\n                    >\r\n                    <el-button\r\n                        type=\"text\"\r\n                        class=\"delete\"\r\n                        @click=\"deleteCategory(scope.row.id)\"\r\n                        >删除</el-button\r\n                    >\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <page-pagination\r\n            :pageSize=\"10\"\r\n            @currentChange=\"handleCurrentChange\"\r\n            :total=\"total\"\r\n        ></page-pagination>\r\n\r\n        <el-dialog\r\n            :title=\"!id ? '新建分类' : '编辑分类'\"\r\n            width=\"700px\"\r\n            @close=\"reset\"\r\n            :visible.sync=\"showDialog\"\r\n        >\r\n            <div class=\"Category-form\" v-loading=\"loadingDetail\">\r\n                <el-form\r\n                    :model=\"form\"\r\n                    :rules=\"rules\"\r\n                    label-position=\"left\"\r\n                    label-width=\"100px\"\r\n                    ref=\"form\"\r\n                >\r\n                    <el-form-item label=\"分类名称\" prop=\"name\">\r\n                        <el-input\r\n                            v-model.trim=\"form.name\"\r\n                            placeholder=\"请输入分类名称\"\r\n                        ></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"排序\" prop=\"sort_val\">\r\n                        <el-input-number\r\n                            v-model=\"form.sort_val\"\r\n                            :min=\"1\"\r\n                            label=\"请输入排序\"\r\n                        ></el-input-number>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <div class=\"submit-btn\">\r\n                    <el-button\r\n                        type=\"primary\"\r\n                        @click=\"save\"\r\n                        :loading=\"btnloading\"\r\n                        size=\"medium\"\r\n                        >保存</el-button\r\n                    >\r\n                </div>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    getCategoryList,\r\n    delCategory,\r\n    getCategoryDetail,\r\n    addCategory,\r\n    updateCategory,\r\n    publishCategory,\r\n    downCategory\r\n} from 'src/api/category'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            data: [],\r\n            loading: false,\r\n            total: 0,\r\n            key: '',\r\n            showDialog: false,\r\n            id: '', // 当前编辑的id\r\n            form: {\r\n                name: '', // 课程名称\r\n                sort_val: ''\r\n            },\r\n            rules: {\r\n                name: {\r\n                    message: '分类名称不能为空',\r\n                    required: true,\r\n                    trigger: ['blur']\r\n                },\r\n                sort_val: {\r\n                    message: '排序不能为空',\r\n                    required: true,\r\n                    trigger: ['blur']\r\n                }\r\n            },\r\n            loadingDetail: false,\r\n            btnloading: false,\r\n            page: 1,\r\n            statusMap: {\r\n                0: '待发布',\r\n                1: '已发布',\r\n                2: '已下架'\r\n            }\r\n        }\r\n    },\r\n    components: {},\r\n    methods: {\r\n        // 发布这个分类\r\n        publish(item) {\r\n            this.$confirm('请确认该分类下是否已经编辑好课程?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            })\r\n                .then(() => {\r\n                    publishCategory(item.id)\r\n                        .then(() => {\r\n                            this.$message.success('发布分类成功')\r\n                            this.fetchData()\r\n                        })\r\n                        .catch(e => {\r\n                            this.$message.error(e.message)\r\n                        })\r\n                })\r\n                .catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消删除'\r\n                    })\r\n                })\r\n        },\r\n        // 下架\r\n        down(item) {\r\n            downCategory(item.id)\r\n                .then(() => {\r\n                    this.$message.success('下架分类成功')\r\n                    this.fetchData()\r\n                })\r\n                .catch(e => {\r\n                    this.$message.error(e.message)\r\n                })\r\n        },\r\n        refreshData() {\r\n            this.fetchData()\r\n            this.showDialog = false\r\n        },\r\n        gotoAdd() {\r\n            this.showDialog = true\r\n            this.id = ''\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.page = val\r\n            this.fetchData(val)\r\n        },\r\n        fetchData(page) {\r\n            if (this.loading) {\r\n                return\r\n            }\r\n            this.loading = true\r\n\r\n            getCategoryList({\r\n                page: page || this.page || 1\r\n            })\r\n                .then(res => {\r\n                    this.data = res.data\r\n                    this.total = res.total\r\n                })\r\n                .catch(e => {\r\n                    this.$message.error(e.message)\r\n                })\r\n                .finally(() => {\r\n                    this.loading = false\r\n                })\r\n        },\r\n\r\n        deleteCategory(id) {\r\n            this.$confirm('此操作将永久删除该分类, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            })\r\n                .then(() => {\r\n                    delCategory(id)\r\n                        .then(() => {\r\n                            this.$message.success('删除分类成功')\r\n                            if (this.data.length === 1) {\r\n                                const prePage = this.page - 1\r\n                                this.page = prePage >= 1 ? prePage : 1\r\n                            }\r\n                            this.fetchData()\r\n                        })\r\n                        .catch(e => {\r\n                            this.$message.error(e.message)\r\n                        })\r\n                })\r\n                .catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消删除'\r\n                    })\r\n                })\r\n        },\r\n        gotoEdit(item) {\r\n            this.showDialog = true\r\n            this.id = item.id\r\n            this.fetchDetail()\r\n        },\r\n        beforeUpload() {\r\n            //\r\n        },\r\n        onUploadSuccess(res) {\r\n            if (res.code === 200) {\r\n                this.form.imgUrl = res.data.media_real_url\r\n                this.form.img = res.data.media_id\r\n                this.$message.success('上传图片成功')\r\n            } else {\r\n                this.$message.error(`图片上传失败：${res.msg}`)\r\n            }\r\n        },\r\n        onUploadError() {\r\n            this.$message.error('图片上传失败')\r\n        },\r\n        save() {\r\n            this.$refs.form.validate(valid => {\r\n                if (valid) {\r\n                    if (this.btnloading) {\r\n                        return\r\n                    }\r\n                    this.btnloading = true\r\n                    if (!this.id) {\r\n                        addCategory(this.form)\r\n                            .then(() => {\r\n                                this.$message.success('添加成功')\r\n                                this.showDialog = false\r\n                                this.fetchData()\r\n                            })\r\n                            .catch(e => {\r\n                                this.$message.error(e.message)\r\n                            })\r\n                            .finally(() => {\r\n                                this.btnloading = false\r\n                            })\r\n                    } else {\r\n                        updateCategory(this.id, this.form)\r\n                            .then(() => {\r\n                                this.$message.success('保存成功')\r\n                                this.showDialog = false\r\n                                this.fetchData()\r\n                            })\r\n                            .catch(e => {\r\n                                this.$message.error(e.message)\r\n                            })\r\n                            .finally(() => {\r\n                                this.btnloading = false\r\n                            })\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        fetchDetail() {\r\n            if (this.loadingDetail) {\r\n                return\r\n            }\r\n            this.loadingDetail = true\r\n\r\n            getCategoryDetail(this.id)\r\n                .then(res => {\r\n                    this.form = res\r\n                    this.$refs.form.clearValidate()\r\n                })\r\n                .catch(e => {\r\n                    this.$message.error(e.message)\r\n                })\r\n                .finally(() => {\r\n                    this.loadingDetail = false\r\n                })\r\n        },\r\n        reset() {\r\n            this.$refs.form && this.$refs.form.resetFields()\r\n        }\r\n    },\r\n    created() {\r\n        this.fetchData()\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '~assets/less/var.less';\r\n.Category-form {\r\n    .el-input,\r\n    .el-textarea,\r\n    .el-select {\r\n        width: 400px;\r\n    }\r\n}\r\n.submit-btn {\r\n    margin: 30px 0 10px;\r\n    text-align: right;\r\n    button {\r\n        min-width: 100px;\r\n    }\r\n}\r\n.page-Category-list {\r\n    background-color: #fff;\r\n    .tips {\r\n        color: @color-gray;\r\n        font-size: 12px;\r\n        line-height: 36px;\r\n    }\r\n    header {\r\n        padding: 15px 20px;\r\n        text-align: right;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        .el-input {\r\n            width: 300px;\r\n        }\r\n    }\r\n    .el-button.delete {\r\n        color: @color-red;\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=d8ae4308&scoped=true&\"\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=d8ae4308&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d8ae4308\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=d8ae4308&lang=less&scoped=true&\""],"sourceRoot":""}